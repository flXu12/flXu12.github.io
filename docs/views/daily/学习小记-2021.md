---
title: 【day day up系列】2021年3月学习日记
date: 2021-02-22
categories:
 - 日常
tags:
 - daily
siderbar: auto
---

> 聚水成河，汇河成海

# 2021年2月小记

## 1. 编译和运行的区别
**编译型语言**

代码是由CPU执行的，而CPU无法直接执行类似if...else这样的高级语言，只能执行二进制指令，因此需要将高级语言转化为CPU能识别的汇编语言/机器指令才能执行。
- 编译：包含编译和链接两个过程。前者把源文件转换成机器可以识别的二进制语言，后者将生成的二进制文件组装成一个可执行文件。
- 运行：将编译生成的可执行文件在系统中运行的过程。

**解释型语言**

**JavaScript是轻量级解释型语言。** 在执行之前不需要将代码转化为其他形式，而是直接以文本格式（text form）被接收和处理。其编译过程发生在代码运行中，而非之前。

MDN——什么是JavaScript：
![](../images/daily-002.png)

## 2.  我不知道的yarn upgrade
在指定包名称进行升级时，执行yarn upgrade [package]命令会升级该依赖到package.json中约束的最新版本，产生一个文件修改，即yarn.lock，这是我之前对yarn upgrade的理解。但昨天遇到一个问题，对这个命令有了更深的理解，但苦于无法在网上找到相关资料（OS：是我的问题太low么？）  

以下举例说明吧，更直观些：  

假如目前有个项目A，其package.json中有如下依赖：

```JSON
{
  ...
  "dependencies": {
    "package-a": "^1.0.1"
  }
  ...
}
```

在A项目下有一个yarn.lock文件，其中生成的关于package-a的依赖信息如下：

```text
...
"package-a@^1.0.1":
  version "1.0.3"
  ...(一些不重要的属性)
  dependencies:
    "package-b" "^1.1.1"
...
"package-b@^1.1.1":
  version "1.1.2"
...
```

在生成的node_modules文件中就会有如下依赖关系：

├── node_modules 

│　　├── package-a (1.0.3)
 
│　　　　　├── package-b (1.1.2)

那么问题来了：package-b因为修复了一个小小的bug,升级了个版本号1.1.3，package-a未更新，版本号依旧是1.0.3，而项目A需要包含这次bugfix，然后同事B让我直接在项目A下执行yarn upgrade package-a:

```text
我：为啥不先更新下package-a中的package-b的依赖，然后发个包，然后在项目A下执行yarn upgrade package-a呢？
B：yarn upgrade会进行递归更新呀！
我：虽然package-a中没有锁定package-b的版本号，但是package-a的yarn.lock对版本号依旧是有约束的，不应该先更新package-a的yarn.lock吗？
B：yarn upgrade会递归更新呀！！
我：那这样yarn.lock的约束性不就没得了吗？
B：你执行yarn upgrade package-a就完事了！
```

然后我就抱着疑惑的态度执行了yarn upgrade package-a。。。

**我以为的yarn upgrade package-a:**
哼，肯定没有产生变化的yarn.lock文件。

**实际的yarn upgrade package-a:**
哇哦，真香，yarn.lock文件竟然有变化！

在项目A的yarn.lock文件中，package-a没有更新，但是package-b更新了：
```text
...
"package-b@^1.1.1":
  version "1.1.3"
...
```

在查找了yarn官方文档以及各种Google无果后，我暂且得出如下结论：

**执行yarn upgrade [package]指令，除了package本身的更新外，还会递归更新package内的所有依赖，更新的依据是package.json，而不是yarn.lock**

## 3. vue之v-if与v-for
**v-if**：条件渲染。

**v-for**：基于一个数组渲染一个列表。

vue官方教程：【**<font color="#0000dd">必要的</font>**】不推荐在同一元素上使用v-if和v-for。

- **优先级**: 
  - 在vue2中，当v-if与v-for作用于同一元素时，v-for优先级高于v-if；
  - 在vue3中，当v-if与v-for作用于同一元素时，v-if优先级高于v-for.
- **性能问题**：
  - 当v-for优先级高于v-if时（vue2），即使列表中最终只需要渲染一部分元素，但由于v-for会遍历所有数组元素，导致每次重新渲染时都会遍历整个列表，不论v-if时truthy还是falsy.
- **功能阻塞**：
  - 当v-if优先级高于v-for时（vue3），假设v-if的判断需要拿到v-for数组遍历中的变量，则会抛出错误提示该变量未定义。考虑场景：

  ```html
  <!-- error: property "item" is not defined on instance -->
  <li v-for="(item, index) in datas" :key="index" v-if="item.show">{{item.text}}</li>
  ```
OS: vue官网每句话都值得推敲。

## 4. 你了解语法糖吗
**什么是语法糖？**

> 语法糖（Syntactic sugar），指计算机语言中添加的某种语法，这种语法对语言的功能并没有影响，但是更方便程序员使用。

换个说法，语法糖是从开发体验角度来设计的一种语法，带来了两大好处：一是可读性高，二是bug率低，提效。就好比一粒用糖衣包裹的中药，能让人免于苦口，但又能达到中药的疗效。

**JS语法糖**

## 5. $event接口【todo】

# 2021年3月小记


