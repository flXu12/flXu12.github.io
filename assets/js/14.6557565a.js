(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{540:function(t,s){t.exports="data:image/png;base64,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"},541:function(t,s){t.exports="data:image/png;base64,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"},542:function(t,s,a){t.exports=a.p+"assets/img/daily-036.d1ee02e2.gif"},543:function(t,s){t.exports="data:image/png;base64,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"},544:function(t,s,a){t.exports=a.p+"assets/img/daily-059.4240ed08.png"},728:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("blockquote",[n("p",[t._v("存档去年，喜迎新年。")])]),t._v(" "),n("h2",{attrs:{id:"_1-研发说-这个定时任务是幂等的"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-研发说-这个定时任务是幂等的"}},[t._v("#")]),t._v(" 1. 研发说：这个定时任务是幂等的")]),t._v(" "),n("h3",{attrs:{id:"幂等的概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#幂等的概念"}},[t._v("#")]),t._v(" 幂等的概念")]),t._v(" "),n("p",[t._v("幂等（Idempotence）是一个数学概念，在计算机科学中广泛应用于描述操作或函数的行为。在编程和软件设计中，一个操作或函数是幂等的，意味着重复执行这个操作或函数多次的效果等同于只执行一次。也就是说，无论执行多少次，结果都是相同的。")]),t._v(" "),n("h3",{attrs:{id:"幂等在编程中的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#幂等在编程中的应用"}},[t._v("#")]),t._v(" 幂等在编程中的应用")]),t._v(" "),n("p",[t._v("在编程中，幂等性通常与操作的副作用相关。如果一个函数没有副作用（即不会对系统状态产生任何永久性的改变），那么它通常是幂等的。")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 幂等")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一次调用，结果为6")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二次调用，结果依然为6")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("在分布式系统、数据库操作、网络请求等领域，幂等性是一个重要的概念，它有助于确保系统的一致性和正确性。例如，当一个网络请求由于网络问题被重复发送时，如果这个请求是幂等的，那么服务器可以安全地忽略重复的请求，而不必担心产生不一致的状态。")]),t._v(" "),n("h3",{attrs:{id:"对立面-非幂等"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#对立面-非幂等"}},[t._v("#")]),t._v(" 对立面：非幂等")]),t._v(" "),n("p",[t._v("非幂等意味着重复执行一个操作或函数会导致不同的结果。在编程和软件设计中，一个操作或函数是非幂等的，意味着如果每次执行它都会产生不同的结果，或者至少有可能产生不同的结果。")]),t._v(" "),n("h3",{attrs:{id:"非幂等在编程中的应用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#非幂等在编程中的应用"}},[t._v("#")]),t._v(" 非幂等在编程中的应用")]),t._v(" "),n("ul",[n("li",[t._v("数据库操作：某些数据库操作，如插入、更新或删除记录，通常是非幂等的，因为重复执行这些操作可能会导致记录被多次插入、更新或删除。")]),t._v(" "),n("li",[t._v("网络请求：许多类型的网络请求（如HTTP请求）默认是非幂等的。例如，对同一个网址执行两次GET请求通常会返回相同的结果，但执行两次POST请求可能会导致数据被重复处理。")]),t._v(" "),n("li",[t._v("文件操作：对一个文件执行写操作（如append、write等）可能是非幂等的，因为重复写入可能会导致数据被重复添加到文件中。")]),t._v(" "),n("li",[t._v("函数副作用：任何产生副作用的函数，例如修改全局变量、I/O操作或改变自身参数的函数，通常都是非幂等的。")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 非幂等")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// increment函数作用：累加器，初始值为0")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一次调用，结果为5")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二次调用，结果为10")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("h3",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),n("p",[t._v("在设计系统或函数时，如果可能，应该尽量使其具有幂等性，因为这样可以提高系统的可靠性、安全性和可维护性。"),n("br"),t._v("\n对于非幂等的操作，通常需要额外的机制来防止副作用或不一致性的产生，例如通过使用事务、版本控制或唯一性验证等手段。")]),t._v(" "),n("h2",{attrs:{id:"_2-请听好-定时任务终止后务必重置timer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-请听好-定时任务终止后务必重置timer"}},[t._v("#")]),t._v(" 2. 请听好，定时任务终止后务必重置timer！")]),t._v(" "),n("p",[t._v("最近看到了一段这样的代码：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ind "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("startLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("timer未清空 -> ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loopProgress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loopProgress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(", execute ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ind"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])]),n("p",[t._v("请在浏览器控制台输入上述代码，首先执行"),n("code",[t._v("startLoop")]),t._v("，待打印几次后再执行"),n("code",[t._v("cancelLoop")]),t._v("，你会发现神奇的现象（不是每次都出现但出现概率极高噢）：")]),t._v(" "),n("ul",[n("li",[t._v("定时任务终止，但timer未被设置成null？？？")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(540),alt:""}})]),t._v(" "),n("ul",[n("li",[t._v("再次执行"),n("code",[t._v("startLoop")]),t._v("，未开启定时任务？？？")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(541),alt:""}})]),t._v(" "),n("p",[t._v("查看了MDN文档，发现使用"),n("code",[t._v("clearInterval")]),t._v("或"),n("code",[t._v("clearTimeout")]),t._v("只会取消定时器，不会重置timer，导致再次尝试启用定时器时，由于timer判断falsy导致启用失败。")]),t._v(" "),n("p",[t._v("优化后代码：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ind "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("startLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("timer未清空 -> ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loopProgress"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("loopProgress")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v(", execute ")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("ind"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelLoop")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  timer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("h3",{attrs:{id:"小结-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结-2"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),n("p",[t._v("通过"),n("code",[t._v("clearInterval(timerId)")]),t._v(" 或"),n("code",[t._v("clearTimeout(timerId)")]),t._v("可以清除定时器，但是"),n("code",[t._v("timerId")]),t._v("并不会被置空，不能以"),n("code",[t._v("Boolean（timerId）")]),t._v("判断定时器已关闭。")]),t._v(" "),n("h2",{attrs:{id:"_3-【lodash踩坑系列】多实例组件使用once仅触发一次噢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-【lodash踩坑系列】多实例组件使用once仅触发一次噢"}},[t._v("#")]),t._v(" 3. 【lodash踩坑系列】多实例组件使用once仅触发一次噢")]),t._v(" "),n("h3",{attrs:{id:"前置信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前置信息"}},[t._v("#")]),t._v(" 前置信息")]),t._v(" "),n("p",[n("strong",[n("code",[t._v("lodash")])]),t._v("：一个应用非常普遍的js库，提供了丰富的工具函数帮助开发人员处理数组、对象、字符串等数据类型，可以简化代码复杂度，减少代码量和潜在bug。"),n("br"),t._v(" "),n("strong",[n("code",[t._v("once(func)")])]),t._v("：创建一个只能调用 func 一次的函数。 重复调用返回第一次调用的结果。 func 调用时， this 绑定到创建的函数，并传入对应参数。")]),t._v(" "),n("ul",[n("li",[t._v("参数: func（Function），指定的触发函数。")]),t._v(" "),n("li",[t._v("返回：（function），一个新的受限函数。")])]),t._v(" "),n("p",[t._v("使用举例：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" once "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash/once'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sayHello")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" onceFunc "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sayHello"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onceFunc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第一次执行onceFunc()，打印'hello'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("onceFunc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 第二次执行onceFunc()，不会执行sayHello()，也不会打印'hello'")]),t._v("\n\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[n("img",{attrs:{src:a(542),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"问题描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题描述"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),n("p",[t._v("vue项目某页面使用了一个公共组件A，用户可以自定义添加多个卡片在界面进行展示，卡片内是组件A。用户通过鼠标拖拽卡片右下角来调整宽高，卡片内组件A宽高期望能自适应调整（参考仪表板业务场景）。页面布局如下：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(543),alt:""}})]),t._v(" "),n("p",[t._v("问题说明：\n当页面引用多个组件A时，调整卡片高度后，组件A的高度不会自适应。")]),t._v(" "),n("h3",{attrs:{id:"排查路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#排查路径"}},[t._v("#")]),t._v(" 排查路径")]),t._v(" "),n("ol",[n("li",[t._v("查看控制台有无组件相关的报错或警告 => 无")]),t._v(" "),n("li",[t._v("尝试调整数据量，对每个卡片进行拖拽，确认是否所有组件A都异常 => 发现仅一个是正常的，其余都异常！")]),t._v(" "),n("li",[t._v("删除所有组件A仅保留一个，再调整卡片高度，确认是否异常 => 否")]),t._v(" "),n("li",[t._v("通过vue devtools查看组件A接收的props属性是否有区别 => 无")]),t._v(" "),n("li",[t._v("继续查看组件A内部与高度相关的属性是否有差异 => 有")]),t._v(" "),n("li",[t._v("查看组件A源码，找到高度计算相关逻辑，debugger")]),t._v(" "),n("li",[t._v("发现组件A内部在初始化时使用"),n("code",[t._v("once")]),t._v("添加了一个resize监听器，用于监听父元素高度变化，从而实现高度自适应填充与布局更新")]),t._v(" "),n("li",[t._v("在"),n("code",[t._v("once")]),t._v("执行前debugger，发现只有第一个完成初始化的组件A会执行"),n("code",[t._v("once")]),t._v("内的监听函数，其后所有组件A均没有成功添加监听")])]),t._v(" "),n("p",[t._v("相关逻辑如下：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" once "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" addResizeListener "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听器实现工具方法，不是重点。")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      height"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nmethods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  addParentNodeResizeListener"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addParentNodeResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("p",[t._v("代码执行说明：")]),t._v(" "),n("ul",[n("li",[t._v("第一个注册的组件A（后续称A1），在mounted中第一次执行"),n("code",[t._v("setHeight")]),t._v(" -> "),n("code",[t._v("addParentNodeResizeListener")]),t._v(" -> "),n("code",[t._v("addResizeListener")]),t._v("，成功添加监听器。")]),t._v(" "),n("li",[t._v("其后注册的组件A（后续称A2），由于"),n("code",[t._v("addParentNodeResizeListener")]),t._v("已经执行过一次，不会再执行，故在mounted执行的路径为"),n("code",[t._v("setHeight")]),t._v("，不会添加监听器。")]),t._v(" "),n("li",[t._v("若之后用户手动拖拽A1卡片，会再次执行"),n("code",[t._v("setHeight")]),t._v("，但由于此前"),n("code",[t._v("addParentNodeResizeListener")]),t._v("已经执行过一次，故仅会更新"),n("code",[t._v("height")]),t._v("属性，从而实现高度自适应。")]),t._v(" "),n("li",[t._v("接着用户手动拖拽A2卡片，由于没有执行添加监听器函数，故不会执行"),n("code",[t._v("setHeight")]),t._v("，进而导致高度不会自适应。")])]),t._v(" "),n("h3",{attrs:{id:"解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),n("p",[t._v("从上述排查分析可知，异常原因是所有组件A的实例公用了"),n("code",[t._v("addParentNodeResizeListener")]),t._v("。因此，只要每个组件A在注册后都能执行一次"),n("code",[t._v("addParentNodeResizeListener")]),t._v("，就可以分别添加各自的监听器，从而实现高度自适应。")]),t._v(" "),n("p",[t._v("修改后的代码：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" once "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" addResizeListener "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听器实现工具方法，不是重点。")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      height"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("addParentNodeResizeListener "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_addParentNodeResizeListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nmethods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("_addParentNodeResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addParentNodeResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br")])]),n("p",[t._v("关注第12行代码，确保每个组件注册时都会声明一个"),n("code",[t._v("once")]),t._v("函数"),n("code",[t._v("addParentNodeResizeListener")]),t._v("，这个函数中的"),n("code",[t._v("once")]),t._v("绑定的是当前实例的"),n("code",[t._v("_addParentNodeResizeListener")]),t._v("方法，因此每个组件实例的"),n("code",[t._v("addParentNodeResizeListener")]),t._v("都是独一无二的，从而都可成功添加resize监听。")]),t._v(" "),n("p",[t._v("另一个思路： 根因是"),n("code",[t._v("once")]),t._v("函数被复用了，那么只要将其执行的上下文分别绑定到各个组件A实例即可实现监听。")]),t._v(" "),n("p",[t._v("代码如下：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[t._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" once"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bind "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lodash'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" addResizeListener "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./utils'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 监听器实现工具方法，不是重点。")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      height"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nmethods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  addParentNodeResizeListener"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeight")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      \n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("addParentNodeResizeListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("h3",{attrs:{id:"小结-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结-3"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),n("p",[t._v("once用法需谨慎，否则排查两行泪~~")]),t._v(" "),n("h2",{attrs:{id:"_4-【vue踩坑系列】-attrs属性被删除时-子组件依然能获取到属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-【vue踩坑系列】-attrs属性被删除时-子组件依然能获取到属性"}},[t._v("#")]),t._v(" 4. 【vue踩坑系列】$attrs属性被删除时，子组件依然能获取到属性")]),t._v(" "),n("h3",{attrs:{id:"结论先行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#结论先行"}},[t._v("#")]),t._v(" 结论先行")]),t._v(" "),n("p",[t._v("Vue在更新"),n("code",[t._v("$attrs")]),t._v("时，会保留之前传递的所有属性，即使这些属性被删除了。")]),t._v(" "),n("p",[t._v("Vue官方文档：")]),t._v(" "),n("blockquote",[n("p",[n("code",[t._v("$attrs")]),t._v("包含了父作用域中不作为props被识别（且获取）的"),n("code",[t._v("attribute")]),t._v("绑定（不含"),n("code",[t._v("class")]),t._v("和"),n("code",[t._v("style")]),t._v("）。当组件未声明任何"),n("code",[t._v("props")]),t._v("时，这里会包含所有父作用域的绑定，并且可以通过"),n("code",[t._v('v-bind="$attrs"')]),t._v("传入内部组件。")])]),t._v(" "),n("h3",{attrs:{id:"背景信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#背景信息"}},[t._v("#")]),t._v(" 背景信息")]),t._v(" "),n("p",[t._v("vue项目，父组件A中引用了子组件B，其中B接收三个props分别为propA、propB、propC。代码示例如下：")]),t._v(" "),n("p",[n("strong",[t._v("A.vue")])]),t._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("component-a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("toggle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("切换"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component-b")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-bind")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("bindValue1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component-b")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-bind")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("bindValue2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ComponentB "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./component-b.vue'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    components"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ComponentB "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        bindValue1"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          propA"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          propB"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'aaa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          propC"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        bindValue2"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" propA"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toggle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bindValue1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("delete")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bindValue1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bindValue1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".component-a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 300px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 200px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10px"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("border")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid gray"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  \n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br")])]),n("p",[n("strong",[t._v("B.vue")])]),t._v(" "),n("div",{staticClass:"language-vue line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-vue"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("component-b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("getAttrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("获取$attrs"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ value }}"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("template")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        value"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    methods"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAttrs")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'propB'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propB"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$attrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br")])]),n("h3",{attrs:{id:"问题描述-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题描述-2"}},[t._v("#")]),t._v(" 问题描述")]),t._v(" "),n("p",[t._v("父组件A在点击按钮时会使用delete方法删除"),n("code",[t._v("bindValue1")]),t._v("的"),n("code",[t._v("propB")]),t._v("属性，子组件B点击获取时打印发现"),n("code",[t._v("propB")]),t._v("还是旧值。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(544),alt:""}})]),t._v(" "),n("h3",{attrs:{id:"排查路径-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#排查路径-2"}},[t._v("#")]),t._v(" 排查路径")]),t._v(" "),n("ol",[n("li",[t._v("尝试在组件A中打印"),n("code",[t._v("bindValue1")]),t._v("，发现点击切换按钮后"),n("code",[t._v("bindValue1")]),t._v("中已经没有"),n("code",[t._v("propB")]),t._v("属性")]),t._v(" "),n("li",[t._v("尝试在组件A中修改切换按钮后的逻辑，将delete操作换成赋值操作，发现子组件B可以正常更新"),n("code",[t._v("propB")])]),t._v(" "),n("li",[t._v("结论：delete操作导致"),n("code",[t._v("bindValue1")]),t._v("的属性丢失了响应性。")])]),t._v(" "),n("h3",{attrs:{id:"解决方案-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案-2"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),n("p",[t._v("使用不影响响应式的方式更新属性值。")]),t._v(" "),n("h2",{attrs:{id:"_5-window-open之你不知道的那些事"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-window-open之你不知道的那些事"}},[t._v("#")]),t._v(" 5. window.open之你不知道的那些事")]),t._v(" "),n("h3",{attrs:{id:"背景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),n("p",[t._v("系统有两个页面A/B可互相跳转。其中A页面中有个图片可以通过点击，利用自定义实现的"),n("code",[t._v("jump")]),t._v("方法新开一个tab页跳到B页面。B页面可以通过按钮点击跳到A。")]),t._v(" "),n("h3",{attrs:{id:"问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),n("p",[t._v("操作步骤：")]),t._v(" "),n("ol",[n("li",[t._v("进入A页面，点击图片跳到B页面（"),n("code",[t._v("jump(urlB)")]),t._v("）")]),t._v(" "),n("li",[t._v("在上一步打开的B页面点击按钮，跳到A页面（"),n("code",[t._v("<a>")]),t._v("标签）")]),t._v(" "),n("li",[t._v("在上一步打开的A页面，点击图片跳到B页面（"),n("code",[t._v("jump(urlB)")]),t._v("）")])]),t._v(" "),n("p",[t._v("期望结果：")]),t._v(" "),n("ol",[n("li",[t._v("新开tab页打开B页面")]),t._v(" "),n("li",[t._v("当前页打开A页面")]),t._v(" "),n("li",[t._v("新开tab页打开B页面")])]),t._v(" "),n("p",[t._v("实际结果：")]),t._v(" "),n("ol",[n("li",[t._v("新开tab页打开B页面")]),t._v(" "),n("li",[t._v("当前页打开A页面")]),t._v(" "),n("li",[t._v("当前页打开B页面")])]),t._v(" "),n("h3",{attrs:{id:"window-open"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#window-open"}},[t._v("#")]),t._v(" window.open")]),t._v(" "),n("p",[n("code",[t._v("window.open(url, target, windowFeatures)")]),t._v(":")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("url")]),t._v('：一个字符串，表示要加载的资源的 URL 或路径。如果指定空字符串（""）或省略此参数，则会在目标浏览上下文中打开一个空白页。')]),t._v(" "),n("li",[n("code",[t._v("target")]),t._v("：一个不含空格的字符串，用于指定加载资源的浏览上下文的名称。如果该名称无法识别现有的上下文，则会创建一个新的上下文，并赋予指定的名称。还可以使用特殊的 "),n("code",[t._v("target")]),t._v("关键字："),n("code",[t._v("_self")]),t._v("、"),n("code",[t._v("_blank")]),t._v("、"),n("code",[t._v("_parent")]),t._v("和 "),n("code",[t._v("_top")]),t._v("。")]),t._v(" "),n("li",[n("code",[t._v("windowFeatures")]),t._v("：一个字符串，包含以逗号分隔的窗口特性列表。非本节重点，不解释~")])]),t._v(" "),n("h3",{attrs:{id:"问题原因-窗口复用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题原因-窗口复用"}},[t._v("#")]),t._v(" 问题原因——窗口复用")]),t._v(" "),n("p",[t._v("如果当前窗口已经存在"),n("code",[t._v("target")]),t._v("，则在此窗口执行"),n("code",[t._v("window.open(url)")]),t._v("的时候，不会再新开tab页加载新页面，而是在当前窗口中加载。如果要在每次调用"),n("code",[t._v("window.open()")]),t._v("的时候打开一个新窗口，就需要将参数"),n("code",[t._v("target")]),t._v("设置为"),n("code",[t._v("_blank")]),t._v("。")]),t._v(" "),n("p",[t._v("此处实现窗口复用的原理如下：")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("jump")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'_blank'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("引用上述问题，具体解释如下：")]),t._v(" "),n("ol",[n("li",[t._v("进入A页面，点击图片跳到B页面（"),n("code",[t._v("jump(urlB)")]),t._v("）")])]),t._v(" "),n("blockquote",[n("p",[t._v("由于未指定"),n("code",[t._v("target")]),t._v("，因此会新开窗口跳到B（"),n("code",[t._v("window.open(urlB, urlB)")]),t._v("），此时B窗口存在"),n("code",[t._v("target")]),t._v(" = 'urlB'")])]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("在上一步打开的B页面点击按钮，跳到A页面（"),n("code",[t._v("<a>")]),t._v("标签）")])]),t._v(" "),n("blockquote",[n("p",[t._v("此时B窗口存在"),n("code",[t._v("target")]),t._v(" = 'urlB'")])]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("在上一步打开的A页面，点击图片跳到B页面（"),n("code",[t._v("jump(urlB)")]),t._v("）")])]),t._v(" "),n("blockquote",[n("p",[t._v("由于当前窗口的"),n("code",[t._v("target")]),t._v(" = 'urlB'，且跳转的目标url也是'urlB'，因此不再新开窗口，直接在当前窗口加载新的B页面。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);